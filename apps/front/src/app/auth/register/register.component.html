<p-toast position="top-center" key="tr"></p-toast>

<div class="container-fluid pb-3 d-flex align-items-center justify-content-center" style="min-height: 80%">
  <p-card class="col-12 col-md-6 col-lg-6 col-xl-6" styleClass="border">
    <ng-template pTemplate="header">
      <div class="container-fluid text-center py-1 border-bottom fw-bolder">
        <h4>Register</h4>
      </div>
    </ng-template>

    <form [formGroup]="registerForm" autocomplete="off" (submit)="register()">
      <div class="row">
        <div class="col-12 col-md-6 col-lg-6 col-xl-4 mb-2">
          <div class="field">
            <label for="name" class="d-block">Name</label>
            <input id="name" type="text" class="w-100" [ngClass]="{'ng-dirty ng-invalid': isValid('name')}" pInputText
                   formControlName="name"/>
            <small *ngIf="isValid('name')" id="name-help" class="p-error d-block">The name is required</small>
          </div>
        </div>
        <div class="col-12 col-md-6 col-lg-6 col-xl-4 mb-2">
          <div class="field">
            <label for="email" class="d-block">Email</label>
            <input id="email" type="Email" class="w-100" [ngClass]="{'ng-dirty ng-invalid': isValid('email') || invalidEmail, 'form-control is-valid': !invalidEmail && registerForm.get('email')?.touched && !isValid('email')}"
                   pInputText formControlName="email" (focusout)="checkEmail()"/>
            <small *ngIf="isValid('email') && !invalidEmail" id="email-help" class="p-error d-block">The email has to be a valid email
              (demo@demo.com)</small>
            <small *ngIf="invalidEmail" id="usedEmail-help" class="p-error d-block">This email is already registered</small>
          </div>
        </div>

        <div class="col-12 col-md-6 col-lg-6 col-xl-4 mb-2">
          <div class="field">
            <label for="password" class="d-block">Password</label>
            <p-password styleClass="w-100 p-password p-component p-inputwrapper p-input-icon-right" inputStyleClass="w-100" id="password" inputId="password"
                        formControlName="password" [toggleMask]="true"></p-password>
            <small *ngIf="isValid('password')" id="password-help" class="p-error d-block">The password must have 8
              characters, 1 uppercase, 1 lowercase and 1 special character</small>
          </div>
        </div>

        <div class="col-12 col-md-6 col-lg-6 col-xl-6 mb-2">
          <div class="field">
            <label for="safeQuestion" class="d-block">Safe Question</label>
            <textarea id="safeQuestion" rows="1" cols="30" pInputTextarea [autoResize]="true" class="w-100"
                      [ngClass]="{'ng-dirty ng-invalid': isValid('safeQuestion')}"
                      formControlName="safeQuestion"></textarea>
            <small *ngIf="isValid('safeQuestion')" id="safeQuestion-help" class="p-error d-block">The Safe question is
              required</small>
          </div>
        </div>

        <div class="col-12 col-md-6 col-lg-6 col-xl-6  mb-2">
          <div class="field">
            <label for="safeAnswer" class="d-block">Safe answer</label>
            <textarea id="safeAnswer" rows="1" cols="30" pInputTextarea [autoResize]="true" class="w-100"
                      [ngClass]="{'ng-dirty ng-invalid': isValid('safeAnswer')}"
                      formControlName="safeAnswer"></textarea>
            <small *ngIf="isValid('safeAnswer')" id="safeAnswer-help" class="p-error d-block">The Safe answer is
              required</small>
          </div>
        </div>

        <div class="d-grid mt-3">
          <button type="submit" class="btn btn-primary" [disabled]="!registerForm.valid">Register</button>
        </div>
      </div>
    </form>

    <ng-template pTemplate="footer">
      <div class="border-top fs-6 pt-1" style="margin-bottom: -10px">
        Already have an account? <a routerLink="/auth/login">Login</a>
      </div>
    </ng-template>
  </p-card>
</div>
